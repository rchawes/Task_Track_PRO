<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker Pro | Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“‹</text></svg>">
</head>
<body class="light-theme">
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading your tasks...</p>
    </div>
    
    <div id="notificationsContainer" class="notifications-container"></div>
    
    <div id="modal" class="modal"></div>
    
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-brand">
            <i class="fas fa-tasks"></i>
            <h1>Task Tracker Pro</h1>
        </div>
        
        <div class="nav-search">
            <i class="fas fa-search"></i>
            <input type="text" id="taskSearch" placeholder="Search tasks...">
        </div>
        
        <div class="nav-actions">
            <button class="btn-icon" id="themeToggle" title="Toggle theme">
                <i class="fas fa-moon"></i>
            </button>
            
            <button class="btn-icon" id="exportBtn" title="Export tasks">
                <i class="fas fa-download"></i>
            </button>
            
            <div class="user-menu">
                <div class="user-avatar" id="userAvatar">ðŸ‘¤</div>
                <div class="user-info">
                    <span id="userName">Loading...</span>
                    <small id="userEmail">user@example.com</small>
                </div>
                <a href="#" id="logoutBtn" class="btn-icon" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </div>
    </nav>
    
    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <button class="btn btn-primary btn-block" id="newTaskBtn">
                    <i class="fas fa-plus"></i> New Task
                </button>
            </div>
            
            <div class="sidebar-section">
                <h3><i class="fas fa-filter"></i> Filters</h3>
                <div class="filter-list">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-inbox"></i> All Tasks
                    </button>
                    <button class="filter-btn" data-filter="active">
                        <i class="fas fa-clock"></i> Active
                    </button>
                    <button class="filter-btn" data-filter="completed">
                        <i class="fas fa-check-circle"></i> Completed
                    </button>
                    <button class="filter-btn" id="clearFiltersBtn">
                        <i class="fas fa-times"></i> Clear Filters
                    </button>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3><i class="fas fa-chart-bar"></i> Statistics</h3>
                <div class="stats-summary">
                    <div class="stat-item">
                        <span class="stat-value" id="totalTasks">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="completedTasks">0</span>
                        <span class="stat-label">Done</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="pendingTasks">0</span>
                        <span class="stat-label">Pending</span>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%">0%</div>
                    </div>
                    <div class="progress-label">Completion Rate</div>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h2>My Tasks</h2>
                <div class="view-controls">
                    <span class="view-count">
                        <span id="filteredCount">0</span> of <span id="totalCount">0</span> tasks
                    </span>
                </div>
            </header>
            
            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #4b6cb7;">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalTasksCard">0</h3>
                        <p>Total Tasks</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #4CAF50;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="completedTasksCard">0</h3>
                        <p>Completed</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #FF9800;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="pendingTasksCard">0</h3>
                        <p>Pending</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #f44336;">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="overdueTasksCard">0</h3>
                        <p>Overdue</p>
                    </div>
                </div>
            </div>
            
            <!-- Task List -->
            <div class="task-list-container">
                <div id="taskList" class="task-list">
                    <!-- Tasks will be rendered here -->
                </div>
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-tasks"></i>
                <h3>No tasks yet</h3>
                <p>Create your first task to get started!</p>
                <button class="btn btn-primary" id="createFirstTaskBtn">
                    <i class="fas fa-plus"></i> Create Task
                </button>
            </div>
        </main>
    </div>
    
    <footer class="app-footer">
        <p>Task Tracker Pro â€¢ Portfolio Project â€¢ Built with HTML, CSS & JavaScript</p>
    </footer>
    
<script>
    // Main Dashboard Application - FIXED CHECKBOX VERSION
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Dashboard loading...');
        
        // Check if user is logged in
        let user;
        try {
            user = JSON.parse(localStorage.getItem('task_tracker_current_user'));
        } catch (e) {
            console.error('Error parsing user:', e);
            user = null;
        }
        
        if (!user) {
            console.log('No user found, redirecting to login...');
            showNotification('Please login first', 'error');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1500);
            return;
        }
        
        console.log('User authenticated:', user.name);
        
        // Load tasks for this user
        let tasks = [];
        try {
            tasks = JSON.parse(localStorage.getItem('task_tracker_tasks_' + user.id)) || [];
            console.log('Tasks loaded:', tasks.length);
        } catch (e) {
            console.error('Error parsing tasks:', e);
            tasks = [];
        }
        
        // Application State
        const state = {
            user: user,
            tasks: tasks,
            filter: 'all',
            search: ''
        };
        
        // Utility Functions
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'No due date';
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return 'Invalid date';
                
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const taskDate = new Date(date);
                taskDate.setHours(0, 0, 0, 0);
                
                const diffTime = taskDate - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0) return 'Today';
                if (diffDays === 1) return 'Tomorrow';
                if (diffDays === -1) return 'Yesterday';
                if (diffDays < 0) return `${Math.abs(diffDays)} days ago`;
                if (diffDays > 0) return `In ${diffDays} days`;
                
                return date.toLocaleDateString();
            } catch (e) {
                return 'Invalid date';
            }
        }
        
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationsContainer');
            if (!container) return;
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${getNotificationIcon(type)}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            container.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
            
            // Close button
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.remove();
            });
        }
        
        function getNotificationIcon(type) {
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                warning: 'exclamation-triangle',
                info: 'info-circle'
            };
            return icons[type] || 'bell';
        }
        
        // Update user info
        function updateUserInfo() {
            document.getElementById('userName').textContent = state.user.name;
            document.getElementById('userEmail').textContent = state.user.email;
            
            const avatar = document.getElementById('userAvatar');
            if (state.user.avatar) {
                avatar.textContent = state.user.avatar.initials;
                avatar.style.backgroundColor = state.user.avatar.color;
                avatar.style.color = 'white';
                avatar.style.fontWeight = 'bold';
            }
        }
        
        // Update statistics
        function updateStats() {
            const total = state.tasks.length;
            const completed = state.tasks.filter(t => t.completed).length;
            const pending = total - completed;
            
            // Calculate overdue tasks
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const overdue = state.tasks.filter(task => {
                if (!task.dueDate || task.completed) return false;
                try {
                    const dueDate = new Date(task.dueDate);
                    dueDate.setHours(0, 0, 0, 0);
                    return dueDate < today;
                } catch (e) {
                    return false;
                }
            }).length;
            
            const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            // Update sidebar stats
            document.getElementById('totalTasks').textContent = total;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('pendingTasks').textContent = pending;
            
            // Update progress bar
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = completionRate + '%';
            progressBar.textContent = completionRate + '%';
            
            // Update quick stats cards
            document.getElementById('totalTasksCard').textContent = total;
            document.getElementById('completedTasksCard').textContent = completed;
            document.getElementById('pendingTasksCard').textContent = pending;
            document.getElementById('overdueTasksCard').textContent = overdue;
        }
        
        // Get filtered tasks
        function getFilteredTasks() {
            let filtered = [...state.tasks];
            
            // Apply status filter
            if (state.filter === 'active') {
                filtered = filtered.filter(task => !task.completed);
            } else if (state.filter === 'completed') {
                filtered = filtered.filter(task => task.completed);
            }
            
            // Apply search filter
            if (state.search) {
                const searchTerm = state.search.toLowerCase();
                filtered = filtered.filter(task => 
                    task.title.toLowerCase().includes(searchTerm) ||
                    (task.description && task.description.toLowerCase().includes(searchTerm)) ||
                    (task.tags && Array.isArray(task.tags) && task.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
                );
            }
            
            return filtered;
        }
        
        // Render task list
        function renderTaskList() {
            const taskList = document.getElementById('taskList');
            const emptyState = document.getElementById('emptyState');
            const filteredTasks = getFilteredTasks();
            
            // Update counts
            document.getElementById('filteredCount').textContent = filteredTasks.length;
            document.getElementById('totalCount').textContent = state.tasks.length;
            
            if (filteredTasks.length === 0) {
                taskList.innerHTML = '';
                taskList.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            taskList.style.display = 'block';
            emptyState.style.display = 'none';
            
            taskList.innerHTML = filteredTasks.map(task => {
                // Check if task is overdue
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                let isOverdue = false;
                
                if (task.dueDate && !task.completed) {
                    try {
                        const dueDate = new Date(task.dueDate);
                        dueDate.setHours(0, 0, 0, 0);
                        isOverdue = dueDate < today;
                    } catch (e) {
                        isOverdue = false;
                    }
                }
                
                // Priority colors
                const priorityColors = {
                    high: '#f44336',
                    medium: '#FF9800',
                    low: '#4CAF50'
                };
                
                return `
                    <div class="task-item ${task.completed ? 'completed' : ''} ${isOverdue ? 'overdue' : ''}" data-task-id="${task.id}">
                        <div class="task-checkbox-container" onclick="window.handleTaskCheckboxClick('${task.id}', event)">
                            <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} 
                                   id="checkbox-${task.id}" onclick="event.stopPropagation()">
                            <span class="checkbox-custom" onclick="event.stopPropagation()"></span>
                        </div>
                        
                        <div class="task-content">
                            <div class="task-header">
                                <h4 class="task-title">${escapeHtml(task.title)}</h4>
                                ${task.priority === 'high' ? '<span class="star-indicator"><i class="fas fa-exclamation-circle"></i></span>' : ''}
                            </div>
                            
                            ${task.description ? `<p class="task-description">${escapeHtml(task.description)}</p>` : ''}
                            
                            <div class="task-footer">
                                <div class="task-tags">
                                    <span class="priority-badge" style="background: ${priorityColors[task.priority] || '#9e9e9e'}">
                                        <i class="fas fa-flag"></i> ${task.priority}
                                    </span>
                                    
                                    ${task.dueDate ? `
                                        <span class="due-date ${isOverdue ? 'overdue' : ''}">
                                            <i class="fas fa-calendar"></i> ${formatDate(task.dueDate)}
                                        </span>
                                    ` : ''}
                                    
                                    ${task.tags && Array.isArray(task.tags) ? task.tags.map(tag => `
                                        <span class="tag">${escapeHtml(tag)}</span>
                                    `).join('') : ''}
                                </div>
                                
                                <div class="task-actions">
                                    <button class="btn-icon edit-btn" title="Edit task" onclick="window.handleEditTask('${task.id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon delete-btn" title="Delete task" onclick="window.handleDeleteTask('${task.id}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Save tasks to localStorage
        function saveTasks() {
            localStorage.setItem('task_tracker_tasks_' + state.user.id, JSON.stringify(state.tasks));
            console.log('Tasks saved:', state.tasks.length);
        }
        
        // Task operations - EXPOSE TO WINDOW for onclick handlers
        window.handleTaskCheckboxClick = function(taskId, event) {
            console.log('Checkbox clicked for task:', taskId);
            
            // Find the task
            const taskIndex = state.tasks.findIndex(t => t.id === taskId);
            if (taskIndex === -1) return;
            
            // Toggle completed status
            state.tasks[taskIndex].completed = !state.tasks[taskIndex].completed;
            state.tasks[taskIndex].updatedAt = new Date().toISOString();
            
            // Save and update UI
            saveTasks();
            renderTaskList();
            updateStats();
            
            // Show notification
            const action = state.tasks[taskIndex].completed ? 'completed' : 'marked as active';
            showNotification(`Task "${state.tasks[taskIndex].title}" ${action}`, 'success');
            
            // Prevent event bubbling
            if (event) event.stopPropagation();
        };
        
        window.handleEditTask = function(taskId) {
            console.log('Edit task:', taskId);
            const task = state.tasks.find(t => t.id === taskId);
            if (!task) {
                showNotification('Task not found', 'error');
                return;
            }
            
            openTaskModal(task);
        };
        
        window.handleDeleteTask = function(taskId) {
            console.log('Delete task:', taskId);
            if (!confirm('Are you sure you want to delete this task?')) return;
            
            const taskIndex = state.tasks.findIndex(t => t.id === taskId);
            if (taskIndex === -1) return;
            
            const taskTitle = state.tasks[taskIndex].title;
            state.tasks.splice(taskIndex, 1);
            
            saveTasks();
            renderTaskList();
            updateStats();
            showNotification(`Task "${taskTitle}" deleted`, 'info');
        };
        
        function createTask(taskData) {
            const newTask = {
                id: 'task_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                title: taskData.title || 'New Task',
                description: taskData.description || '',
                priority: taskData.priority || 'medium',
                dueDate: taskData.dueDate || null,
                tags: taskData.tags || [],
                completed: false,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            state.tasks.push(newTask);
            saveTasks();
            renderTaskList();
            updateStats();
            showNotification('Task created successfully', 'success');
            
            // Reset filter to show all tasks
            state.filter = 'all';
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.filter === 'all') {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateTask(taskId, updates) {
            const taskIndex = state.tasks.findIndex(t => t.id === taskId);
            if (taskIndex === -1) return;
            
            state.tasks[taskIndex] = { ...state.tasks[taskIndex], ...updates, updatedAt: new Date().toISOString() };
            
            saveTasks();
            renderTaskList();
            updateStats();
            showNotification('Task updated successfully', 'success');
        }
        
        // Open task modal
        function openTaskModal(task = null) {
            const modal = document.getElementById('modal');
            if (!modal) return;
            
            const isEdit = !!task;
            const dueDate = task?.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '';
            const tags = task?.tags ? task.tags.join(', ') : '';
            
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${isEdit ? 'Edit Task' : 'Create New Task'}</h3>
                        <button class="btn-icon modal-close" onclick="closeModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form class="modal-form" id="taskForm">
                        <input type="hidden" name="id" value="${task?.id || ''}">
                        
                        <div class="form-group">
                            <label for="taskTitle">Title *</label>
                            <input type="text" id="taskTitle" name="title" value="${task?.title || ''}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="taskDescription">Description</label>
                            <textarea id="taskDescription" name="description" rows="3">${task?.description || ''}</textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="taskPriority">Priority</label>
                                <select id="taskPriority" name="priority">
                                    <option value="low" ${task?.priority === 'low' ? 'selected' : ''}>Low</option>
                                    <option value="medium" ${!task || task?.priority === 'medium' ? 'selected' : ''}>Medium</option>
                                    <option value="high" ${task?.priority === 'high' ? 'selected' : ''}>High</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="taskDueDate">Due Date</label>
                                <input type="date" id="taskDueDate" name="dueDate" value="${dueDate}">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="taskTags">Tags (comma separated)</label>
                            <input type="text" id="taskTags" name="tags" value="${tags}" placeholder="work, personal, urgent">
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">
                                ${isEdit ? 'Update Task' : 'Create Task'}
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            modal.classList.add('active');
            
            // Handle form submit
            const form = document.getElementById('taskForm');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const formData = new FormData(form);
                const taskData = {
                    title: formData.get('title'),
                    description: formData.get('description'),
                    priority: formData.get('priority'),
                    dueDate: formData.get('dueDate') || null,
                    tags: formData.get('tags') ? formData.get('tags').split(',').map(tag => tag.trim()).filter(tag => tag) : []
                };
                
                if (isEdit) {
                    updateTask(formData.get('id'), taskData);
                } else {
                    createTask(taskData);
                }
                
                closeModal();
            });
        }
        
        // Close modal function - expose to window
        window.closeModal = function() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.classList.remove('active');
            }
        };
        
        // Setup event listeners
        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', function() {
                const isDark = document.body.classList.contains('dark-theme');
                document.body.classList.remove('light-theme', 'dark-theme');
                document.body.classList.add(isDark ? 'light-theme' : 'dark-theme');
                
                const icon = this.querySelector('i');
                icon.className = isDark ? 'fas fa-moon' : 'fas fa-sun';
                
                // Save theme preference
                localStorage.setItem('task_tracker_theme', isDark ? 'light' : 'dark');
                showNotification(`Theme changed to ${isDark ? 'light' : 'dark'}`, 'info');
            });
            
            // New task button
            document.getElementById('newTaskBtn').addEventListener('click', () => {
                openTaskModal();
            });
            
            // Create first task button
            const createFirstBtn = document.getElementById('createFirstTaskBtn');
            if (createFirstBtn) {
                createFirstBtn.addEventListener('click', () => {
                    openTaskModal();
                });
            }
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('task_tracker_current_user');
                    showNotification('Logged out successfully', 'info');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 1000);
                }
            });
            
            // Search input
            document.getElementById('taskSearch').addEventListener('input', (e) => {
                state.search = e.target.value;
                renderTaskList();
            });
            
            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.id === 'clearFiltersBtn') {
                        state.filter = 'all';
                        state.search = '';
                        document.getElementById('taskSearch').value = '';
                        
                        // Update active button
                        document.querySelectorAll('.filter-btn').forEach(b => {
                            b.classList.remove('active');
                            if (b.dataset.filter === 'all') {
                                b.classList.add('active');
                            }
                        });
                    } else {
                        const filter = this.dataset.filter;
                        if (filter) {
                            state.filter = filter;
                            
                            // Update active button
                            document.querySelectorAll('.filter-btn').forEach(b => {
                                b.classList.remove('active');
                            });
                            this.classList.add('active');
                        }
                    }
                    
                    renderTaskList();
                });
            });
            
            // Export button
            document.getElementById('exportBtn').addEventListener('click', () => {
                const data = {
                    tasks: state.tasks,
                    exportedAt: new Date().toISOString(),
                    version: '1.0.0',
                    user: state.user
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `tasks-export-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Tasks exported successfully', 'success');
            });
            
            // Close modal on overlay click
            document.getElementById('modal')?.addEventListener('click', (e) => {
                if (e.target === document.getElementById('modal')) {
                    closeModal();
                }
            });
        }
        
        // Initialize dashboard
        function initDashboard() {
            updateUserInfo();
            updateStats();
            renderTaskList();
            setupEventListeners();
            
            // Load saved theme
            const savedTheme = localStorage.getItem('task_tracker_theme') || 'light';
            document.body.classList.remove('light-theme', 'dark-theme');
            document.body.classList.add(savedTheme + '-theme');
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (savedTheme === 'dark') {
                themeIcon.className = 'fas fa-sun';
            }
            
            // Hide loading overlay
            setTimeout(() => {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.classList.remove('active');
                }
            }, 500);
            
            console.log('Dashboard initialized successfully');
        }
        
        // Start the dashboard
        initDashboard();
        
        // Add debug info to window
        window.dashboardDebug = {
            state: state,
            getFilteredTasks: getFilteredTasks,
            saveTasks: saveTasks,
            showNotification: showNotification
        };
        
        console.log('Task Tracker Pro Dashboard Ready!');
    });
</script>
</body>
</html>